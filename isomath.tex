% mathbb
% \matbbm  requires package bbm
% upright greek math require  pxfonts
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{bbm}
\RequirePackage{mathtools}
\RequirePackage{xargs}

\newcommand{\abs}{\mathrm{abs}}
\DeclareMathOperator*{\argmax}{arg\,max}
\newcommand{\Complex}{\mathbb{C}}% Complex numbers.  needs ams-fonts
\newcommand{\cdf}{\emph{c.d.f.}\xspace}
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\compprod}{\ast}% komponentide kaupa korrutamine
\newcommand{\cov}{\mathrm{Cov}}
\newcommand{\Dif}{\mathbf{D}} % vector differential sign (upright 'D')
\newcommand{\dif}{\mathrm{d}} % differential sign
%% distributed as...  The wide tilde only works in pdf
\makeatletter
\newsavebox{\mybox}\newsavebox{\mysim}
\newcommand{\distas}[1][]{%
  \savebox{\mybox}{\hbox{\kern3pt$\scriptstyle#1$\kern3pt}}%
  \savebox{\mysim}{\hbox{$\sim$}}%
  \mathbin{\overset{#1}{\kern\z@\resizebox{\wd\mybox}{\ht\mysim}{$\sim$}}}%
}
\makeatother
\DeclareMathOperator{\arcsinh}{arcsinh}
\newcommand{\corr}{\mathrm{Corr}}
\newcommand{\diag}{\mathrm{diag}}
\newcommand{\dnorm}{\phi}
\DeclareMathOperator*{\E}{\mathbbm{E}}% expectation
\DeclareMathOperator*{\entropy}{\mathbbm{H}}% expectation
\newcommand{\elemProd}{\ensuremath{\odot}}  % elementwise product of matrices
\newcommand{\idiv}{\,\mathtt{//}\,}% integer division
\newcommand{\iid}{\emph{i.i.d.}\xspace}
\newcommand\independent{\protect\mathpalette{\protect\independenT}{\perp}}
\def\independenT#1#2{\mathrel{\rlap{$#1#2$}\mkern2mu{#1#2}}}
\newcommand{\indic}{\mathbbm{1}}% indicator function
\DeclarePairedDelimiterX{\inner}[2]{\langle}{\rangle}{#1, #2}
\newcommand{\isdistas}{\,\overset{d}{\sim}\,}% is distributed as ...
\newcommand{\kraad}{\ensuremath{^\circ}}
\newcommand{\kronDelta}{\ensuremath{\deltaup}}  % kronecker delta
\newcommand{\kronProd}{\ensuremath{\otimes}}  % kronecker product
\newcommand{\Lagrangian}{\mathcal{L}} % Lagrangian
\newcommand{\likelihood}{\mathcal{L}}% likelihood
\newcommand{\norm}[1]{||#1||}% vector norm
\newcommand{\preHam}{\mathbb{H}} % present value Hamiltonian
\newcommand{\curHam}{\mathcal{H}} % present value Hamiltonian
\newcommand{\Natural}{\mathbb{N}}% Natural numbers.  needs ams-fonts
\newcommandx{\pderiv}[3][1={}, 2={}]{\frac{\partial^{#2}{#1}}{\mathmbox{\partial{#3}}^{#2}}}
% #1: function to differentiate (optional, empty = write after the formula)
% #2: the order of differentiation (optional, empty=1)
% #3: the variable to differentiate wrt (mandatory)
\newcommand{\pdf}{\emph{p.d.f.}\xspace}
\DeclareMathOperator*{\plim}{\mathrm{plim}} % probability limit
\newcommand{\pnorm}{\Phi}
\newcommand{\rank}{\mathrm{rank}\,}% rank of a matrix
\newcommand{\Real}{\mathbb{R}}% Real numbers.  needs ams-fonts
\newcommand{\realpart}{\mathfrak{Re}}% Real numbers.  needs ams-fonts
\DeclareMathOperator{\sign}{sign}
\newcommand{\tderiv}[2][]{\frac{\dif\, #1}{\dif\, #2}}  % total derivative
\DeclareMathOperator{\Tr}{Tr}  % matrix trace
\DeclareMathOperator{\Unif}{\mathrm{Unif}}
\newcommand{\sd}{\mathrm{sd}\,}
\newcommand{\laplace}{\mathcal{L}}% Laplace transform
\newcommand{\loglik}{\ell}% log likelihood
\newcommand*{\mat}[1]{\mathsf{#1}}
\newcommand{\me}{\mathrm{e}} % Konstant e=2,71828
\newcommand{\mi}{\mathrm{i}} 
\newcommand{\mpi}{\piup}
\renewcommand*{\vec}[1]{\boldsymbol{#1}}
%% upper bar with adjusting width
\makeatletter
\newsavebox\myboxA
\newsavebox\myboxB
\newlength\mylenA
\newcommand*\overbar[2][0.75]{% 
    \sbox{\myboxA}{$\m@th#2$}%
    \setbox\myboxB\null% Phantom box
    \ht\myboxB=\ht\myboxA%
    \dp\myboxB=\dp\myboxA%
    \wd\myboxB=#1\wd\myboxA% Scale phantom
    \sbox\myboxB{$\m@th\overline{\copy\myboxB}$}%  Overlined phantom
    \setlength\mylenA{\the\wd\myboxA}%   calc width diff
    \addtolength\mylenA{-\the\wd\myboxB}%
    \ifdim\wd\myboxB<\wd\myboxA%
       \rlap{\hskip 0.5\mylenA\usebox\myboxB}{\usebox\myboxA}%
    \else
        \hskip -0.5\mylenA\rlap{\usebox\myboxA}{\hskip 0.5\mylenA\usebox\myboxB}%
    \fi}
\makeatother
\newcommand*{\transpose}{^{\mkern-1.5mu\mathsf{T}}}
\newcommand{\var}{\mathrm{Var}\,}
